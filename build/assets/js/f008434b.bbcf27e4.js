"use strict";(self.webpackChunkgruppe_2=self.webpackChunkgruppe_2||[]).push([[9412],{8630:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>u,default:()=>m,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var r=n(5893),s=n(1151),a=n(7294);const i=()=>{const[e,t]=(0,a.useState)([]),[n,s]=(0,a.useState)(""),[i,o]=(0,a.useState)({username:"",apiurl:"",longitude:"",latitude:"",homename:"",sensors:""}),[u,l]=(0,a.useState)(""),[d,c]=(0,a.useState)({}),p=new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i"),m=/^-?\d+(\.\d+)?$/;(0,a.useEffect)((()=>{fetch("https://api.yueksel.me/api/ids").then((e=>e.json())).then((e=>t(e))).catch((e=>console.error("Error fetching user IDs:",e)))}),[]);const[h,g]=(0,a.useState)("");(0,a.useEffect)((()=>{n&&fetch(`https://api.yueksel.me/api/users/${n}`).then((e=>e.json())).then((e=>{const t=e[0];o({username:t.username,apiurl:t.apiurl,longitude:t.longitude.toString(),latitude:t.latitude.toString(),homename:t.homename,sensors:t.sensors}),g(t.password)})).catch((e=>console.error("Error fetching user data:",e)))}),[n]);const f=e=>{o({...i,[e.target.name]:e.target.value})};return(0,r.jsxs)("div",{className:"user-config-container",children:[(0,r.jsxs)("select",{onChange:e=>{s(e.target.value)},value:n,children:[(0,r.jsx)("option",{value:"",children:"Select a Sensor ID"}),e.map((e=>(0,r.jsx)("option",{value:e,children:e},e)))]}),(0,r.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!(()=>{const e={};return i.username.trim()||(e.username="Username is required"),p.test(i.apiurl)||(e.apiurl="Invalid API URL"),m.test(i.longitude)||(e.longitude="Invalid longitude"),m.test(i.latitude)||(e.latitude="Invalid latitude"),i.homename.trim()||(e.homename="Home name is required"),i.sensors.trim()||(e.sensors="At least one sensor is required"),c(e),0===Object.keys(e).length})())return;const t={...i};t.password=u||h;try{(await fetch(`https://api.yueksel.me/api/users/${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok?alert("User updated successfully"):alert("Error updating user")}catch(r){alert("Error submitting form")}},className:"user-config-form",children:[(0,r.jsx)("input",{type:"text",name:"username",placeholder:"Username",value:i.username,onChange:f,required:!0}),d.username&&(0,r.jsx)("p",{children:d.username}),(0,r.jsx)("input",{type:"text",name:"apiurl",placeholder:"API URL",value:i.apiurl,onChange:f,required:!0}),d.apiurl&&(0,r.jsx)("p",{children:d.apiurl}),(0,r.jsx)("input",{type:"text",name:"longitude",placeholder:"Longitude",value:i.longitude,onChange:f,required:!0}),d.longitude&&(0,r.jsx)("p",{children:d.longitude}),(0,r.jsx)("input",{type:"text",name:"latitude",placeholder:"Latitude",value:i.latitude,onChange:f,required:!0}),d.latitude&&(0,r.jsx)("p",{children:d.latitude}),(0,r.jsx)("input",{type:"text",name:"homename",placeholder:"Home Name",value:i.homename,onChange:f,required:!0}),d.homename&&(0,r.jsx)("p",{children:d.homename}),(0,r.jsx)("input",{type:"text",name:"sensors",placeholder:"Sensors",value:i.sensors,onChange:f,required:!0}),d.sensors&&(0,r.jsx)("p",{children:d.sensors}),(0,r.jsx)("input",{type:"password",name:"password",placeholder:"New Password",value:u,onChange:e=>{l(e.target.value)}}),(0,r.jsxs)("div",{className:"button-container",children:[(0,r.jsx)("button",{type:"submit",className:"update-button",children:"Update"}),(0,r.jsx)("button",{type:"button",onClick:async()=>{if(window.confirm("Are you sure you want to delete this user?"))try{(await fetch(`https://api.yueksel.me/api/users/${n}`,{method:"DELETE"})).ok?(alert("User deleted successfully"),t(e.filter((e=>e!==n))),s(""),o({username:"",apiurl:"",longitude:"",latitude:"",homename:"",sensors:""}),l("")):alert("Error deleting user")}catch(r){alert("Error deleting user")}},className:"delete-button",children:"Delete"})]})]})]})},o={title:"User Configuration Form"},u="Sensorkonfiguration",l={type:"mdx",permalink:"/config",source:"@site/src/pages/config.mdx",title:"User Configuration Form",description:"Werde ein Teil unserer Community und trage deine Sensorwerte in die Live aktualisierte Karte ein.",frontMatter:{title:"User Configuration Form"},unlisted:!1},d={},c=[];function p(e){const t={h1:"h1",p:"p",...(0,s.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h1,{id:"sensorkonfiguration",children:"Sensorkonfiguration"}),"\n",(0,r.jsx)(t.p,{children:"Werde ein Teil unserer Community und trage deine Sensorwerte in die Live aktualisierte Karte ein."}),"\n",(0,r.jsx)(i,{})]})}function m(e={}){const{wrapper:t}={...(0,s.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},1151:(e,t,n)=>{n.d(t,{Z:()=>o,a:()=>i});var r=n(7294);const s={},a=r.createContext(s);function i(e){const t=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),r.createElement(a.Provider,{value:t},e.children)}}}]);